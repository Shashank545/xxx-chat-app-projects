(window.webpackJsonp_764afdc3_183e_47f5_8d20_a62aff2b0881_0_1_0=window.webpackJsonp_764afdc3_183e_47f5_8d20_a62aff2b0881_0_1_0||[]).push([[5],{jidH:function(e,t,n){"use strict";n.r(t),n.d(t,"NavigationSource",function(){return a}),n.d(t,"ViewNavDataSource",function(){return f}),n.d(t,"isVivaBackendResourcesNavKillSwitchActivated",function(){return m});var a,i=n("17wl"),r=n("K9kD"),o=n("cNe7"),s=n("ysJJ"),c=n("1tKF"),d=n("w0LS"),l=n("UoEp"),u={links:void 0,name:"",startingNodeKey:"",isAudienceEnabled:!1,isAudienceTargeted:!1,isAudienceAffected:!1};!function(e){e[e.None=0]="None",e[e.TopOrHub=1]="TopOrHub",e[e.QuickLaunch=2]="QuickLaunch"}(a||(a={}));var f=function(e){function t(t,n){var a=e.call(this,{id:"ViewNavDataSource"},{pageContext:t})||this;return a._mapProviderName=n,a._audiencesDataSource=s.e.getInstance(t),a._viewNavCacheKey="viewNavDataSource"+"_".concat(t.aadUserId),a}return Object(i.__extends)(t,e),t.isRelativeUrl=function(e){return!!e&&!/^[a-z0-9+-.]+:\/\//i.test(e)&&-1===e.indexOf("/_layouts/15/groupstatus.aspx?")},t.shouldLinkOpenInSameWindow=function(e){if(!e)return!1;var t=new r.Uri(e),n=t.getScheme()+"://"+t.getAuthority(),a=""===t.getScheme()&&""===t.getAuthority();return r.Killswitch.isActivated("44351787-a5fc-4ee1-a228-c166f427dd13","05/18/2023","Make check for external URL case-insensitive")?(a||n===window.location.origin)&&-1===e.indexOf("/_layouts/15/groupstatus.aspx?"):(a||0===n.localeCompare(window.location.origin,void 0,{sensitivity:"accent"}))&&-1===e.indexOf("/_layouts/15/groupstatus.aspx?")},t.transformNodesToLinks=function(e,n,a){var i=function(e,o){return a&&(e=e.filter(function(e){return a(e,o)})),e.map(function(e){var a,s=t.shouldOpenInSpartanTab(e),c="";return c=r.FeatureOverrides.isFeatureEnabled({ODB:60322})?(null!==(a=e.OpenInNewWindow)&&void 0!==a?a:!t.shouldLinkOpenInSameWindow(e.Url))?"_blank":"_self":t.shouldLinkOpenInSameWindow(e.Url)?"_self":"_blank",s&&(c="_blank"),{name:e.Title,key:e.Id.toString(),url:e.Url,onClick:n,isDocLib:e.IsDocLib,links:e.Children&&e.Children.length?i(e.Children,o+1):void 0,audiences:e.AudienceIds||void 0,currentLCID:e.CurrentLCID,openInNewWindow:e.OpenInNewWindow,listTemplateType:e.ListTemplateType,target:c}})};return i(e=e||[],0)},t.getAreaNavigationSettingsUrl=function(e){return"".concat(e.webAbsoluteUrl,"/_layouts/15/AreaNavigationSettings.aspx")},t.prototype.setGlobalNavEnabled=function(e){var t="".concat(this._pageContext.webAbsoluteUrl,"/_api/navigation/SetGlobalNavEnabled?isEnabled=").concat(e);return this.dataRequestor.getData({url:t,qosName:"SetGlobalNavEnabled",method:"POST",noRedirect:!0})},t.prototype.getGlobalNavEnabled=function(){var e=this;return this.getDataUtilizingPersistentCache({getUrl:function(){return"".concat(e._pageContext.webAbsoluteUrl,"/_api/navigation/GlobalNavEnabled")},parseResponse:function(e){var t=JSON.parse(e);return!(!t||!t.d)&&t.d.GlobalNavEnabled},qosName:"getGlobalNavEnabled",method:"GET",noRedirect:!0,cacheRequestKey:"".concat(this._viewNavCacheKey,"_getGlobalNavEnabled")})},t.prototype.setHomeSiteNavEnabled=function(e){if(r.FeatureOverrides.isFeatureEnabled({ODB:1729}))return this.dataRequestor.getData({qosName:"setHomeSiteNavEnabled",method:"POST",url:"".concat(this._pageContext.webAbsoluteUrl,"/_api/navigationSettings/EnableGlobalNavigation"),additionalPostData:JSON.stringify({isEnabled:e}),noRedirect:!0});var t="".concat(this._pageContext.webAbsoluteUrl,"/_api/navigation/homesitesettings"),n={__metadata:{type:"Microsoft.SharePoint.Navigation.REST.HomeSiteNavigationSettings"},IsEnabled:e};return this.dataRequestor.getData({url:t,qosName:"setHomeSiteNavEnabled",method:"PATCH",additionalPostData:JSON.stringify(n),noRedirect:!0})},t.prototype.getHomeSiteNavEnabled=function(){var e=this;return this.getDataUtilizingPersistentCache({getUrl:function(){return"".concat(e._pageContext.webAbsoluteUrl,"/_api/navigation/homesitesettings/isenabled")},parseResponse:function(e){var t=JSON.parse(e);return!(!t||!t.d)&&t.d.IsEnabled},qosName:"getHomeSiteNavEnabled",method:"GET",noRedirect:!0,cacheRequestKey:"".concat(this._viewNavCacheKey,"_getHomeSiteNavEnabled")})},t.prototype.getGlobalNav=function(e,t,n){var a=this,i=new o.Qos({name:"GlobalNavigation"}),r="".concat(this._pageContext.webAbsoluteUrl,"/_api/navigation/GlobalNav");t&&(r+="?source='".concat(t,"'"));var s={url:r,qosName:"GetGlobalNavigation",parseResponse:function(e){var t=JSON.parse(e);return a._transformToNavLinkGroup(t,!1,i,!0)},method:"GET",additionalHeaders:{"ODATA-VERSION":"4.0",Accept:"*/*, application/json; odata.metadata=minimal"},contentType:"application/json; odata.metadata=minimal",maxRetries:1,crossSiteCollectionCall:!0,cachingStrategy:e?d.e.bypassCache:d.e.useCacheIfNotExpired,noRedirect:!0,cacheRequestKey:"".concat(this._viewNavCacheKey,"_getGlobalNav")};return this.getDataUtilizingPersistentCache(s).then(function(e){return a._processGlobalNavNodes(e,n)})},t.prototype.processGlobalNavLKG=function(e,t){var n=new o.Qos({name:"GlobalNavigationFromLKG"});return this._processGlobalNavNodes(this._transformToNavLinkGroup(e,!1,n,!0),t)},t.prototype.getHomeSiteNav=function(e,n,a,i){var r=this,s=!m(),c=s?new o.Qos({name:"GetCurrentResourcesNav"}):new o.Qos({name:"GetHomeSiteNav"}),l="".concat(this._pageContext.webAbsoluteUrl,s?"/_api/navigation/CurrentResourcesNav":"/_api/navigation/HomeSiteNavigation");e&&(l+="?source='".concat(e,"'")),i&&s&&(l+="".concat(e?"&":"?","includeVivaResources=true"));var u={url:l,qosName:s?"GetCurrentResourcesNav":"GetHomeSiteNav",parseResponse:function(e){var t=JSON.parse(e);return r._transformToNavLinkGroup(t,!1,c,!0)},method:"GET",additionalHeaders:{"ODATA-VERSION":"4.0",Accept:"*/*, application/json; odata.metadata=minimal"},contentType:"application/json; odata.metadata=minimal",maxRetries:1,cachingStrategy:a&&s?d.e.bypassCache:d.e.useCacheIfNotExpired,noRedirect:!0,cacheRequestKey:"".concat(this._viewNavCacheKey,"_getCurrentResourcesNav")};return this.dataRequestor.getData(u).then(function(e){return!n&&e.isAudienceEnabled&&e.isAudienceTargeted?r._audiencesDataSource.filter("HomeSiteNav",e.links,"links").then(function(n){var a=t.checkIfLinksAffected(e.links,n);return e.links=n||[],e.isAudienceAffected=a,e}):e})},t.prototype.isNavAudienceTargetedEnabled=function(){var e;return Boolean(0===this._pageContext.webPropertyFlags2||this._pageContext.webPropertyFlags2?this._pageContext.webPropertyFlags2&t.NAV_AUDIENCE_TARGET_FLAG:null===(e=this._pageContext.navigationInfo)||void 0===e?void 0:e.isAudienceTargeted)},t.prototype.getMenuState=function(e){var n=this;void 0===e&&(e={});var a=new o.Qos({name:"TransformMenuStateToLinkGroup"}),i=e.providerName,s=void 0===i?this._mapProviderName:i,c=e.isGlobalNav,f=e.useCache,p=e.forceRefresh,m=e.menuNodeKey,_=e.maxRetries,h=void 0===_?1:_,b=e.depth,g=void 0===b?3:b,v=e.skipAudienceFiltering,y=f?"getMenuStateUsingCache":"NavigationGetMenuState",S="";s=s||this._mapProviderName,m?(S+="?menuNodeKey='".concat(m,"'"),s&&(S+="&mapProviderName='".concat(s,"'"))):(c||s)&&(S+="?menuNodeKey=".concat(c?l.t.globalNavParent:""),s&&(S+="&mapProviderName='".concat(s,"'"))),r.Killswitch.isActivated("a59d510d-6e9d-493a-92ca-e77f6cb190fc","2022-11-09","Not pass depth value to getMenuState")&&S&&S.length>0&&(S+="&depth='".concat(g,"'"));var D={url:"".concat(this._pageContext.webAbsoluteUrl,"/_api/navigation/MenuState").concat(S),qosName:y,qosExtraData:{NavProviderName:s},parseResponse:function(e){var t=JSON.parse(e);return n._transformToNavLinkGroup(t,Boolean(v),a)},method:"GET",additionalHeaders:{"ODATA-VERSION":"4.0",Accept:"*/*, application/json; odata.metadata=minimal"},contentType:"application/json; odata.metadata=minimal",maxRetries:h,crossSiteCollectionCall:!0,cachingStrategy:p?d.e.bypassCache:d.e.useCacheAndUpdateInTheBackground,noRedirect:!0};return(f?this.getDataUtilizingPersistentCache(D).then(function(e){return e||u}):this.dataRequestor.getData(D)).then(function(e){return e.isAudienceEnabled&&e.isAudienceTargeted?n._audiencesDataSource.filter("SiteNav",e.links,"links").then(function(n){var a=t.checkIfLinksAffected(e.links,n);return e.links=n||[],e.isAudienceAffected=a,e}):e})},t.checkIfLinksAffected=function(e,t){return p(e)!==p(t)},t.shouldOpenInSpartanTab=function(e){var n=!1;return n=!r.Killswitch.isActivated("44d556ae-ecbf-4733-8c93-9cc0ca6ca3bc","01/24/2023","open generic lists in new tab to load spartan immersive view")&&r.FeatureOverrides.isFeatureEnabled({ODB:1919})&&t.isGenericList(e.ListTemplateType)&&!("portals"===window.teamsCustomAppType),r.Killswitch.isActivated("20df671b-22a2-4a82-85d0-d3fba0d0ec29","04/24/2023","open doclib in new tab to load spartan immersive view")||n||(n=r.FeatureOverrides.isFeatureEnabled({ODB:60961})&&e.IsDocLib&&!("portals"===window.teamsCustomAppType)),n},t.isGenericList=function(e){return 100===e||104===e||105===e||120===e||1100===e},t.prototype.clearCache=function(){this.flushCache()},t.prototype._transformToNavLinkGroup=function(e,t,n,a){if(!e||!e.Nodes||0===e.Nodes.length)return n.end({resultType:o.ResultTypeEnum.ExpectedFailure,error:"getMenuState empty MenuState"}),u;try{var i=this._getLinksFromNodes(e.Nodes,e.FriendlyUrlPrefix),r={isAudienceEnabled:!t&&(a?e.IsAudienceTargetEnabledForGlobalNav:this.isNavAudienceTargetedEnabled()),isAudienceTargeted:!t&&this._audiencesDataSource.containsAudiences(i,"links"),isAudienceAffected:!1,name:e.StartingNodeTitle||"",links:i,startingNodeKey:e.StartingNodeKey};return n.end({resultType:o.ResultTypeEnum.Success}),r}catch(e){return n.end({resultType:o.ResultTypeEnum.Failure,error:e?e.toString():"getMenuState failed"}),u}},t.prototype._processGlobalNavNodes=function(e,n){return!n&&e.isAudienceEnabled&&e.isAudienceTargeted?this._audiencesDataSource.filter("GlobalNav",e.links,"links").then(function(n){var a=t.checkIfLinksAffected(e.links,n);return e.links=n||[],e.isAudienceAffected=a,e}):r.Promise.resolve(e)},t.prototype._getLinksFromNodes=function(e,n){var a=this,i=function(e,o,s){e=e.filter(function(e){return e.Key!==l.t.quickLaunchRecent&&-1===e.Key.indexOf("SPNavigationNodeId=".concat(l.t.quickLaunchRecent))&&!e.IsDeleted&&!e.IsHidden});var c=s?s+"/":"";return e.map(function(e){var s,d,l=o&&c+o.FriendlyUrlSegment,u=a._getUrl(e,!!o,n,l),f=e.CustomProperties?a._getCustomPropertyValue(e.CustomProperties,"Target"):void 0,p="_blank"===f||null!==f&&void 0,m=r.FeatureOverrides.isFeatureEnabled({ODB:60322}),_=m?(null!==(d=null!==(s=e.OpenInNewWindow)&&void 0!==s?s:p)&&void 0!==d?d:!t.shouldLinkOpenInSameWindow(u))?"_blank":"_self":(null!=p?p:!t.shouldLinkOpenInSameWindow(u))?"_blank":"_self";return{name:e.Title,url:u,key:e.Key,ariaLabel:e.Title,isExpanded:!1,hasChildLinks:e.CustomProperties?"True"===a._getCustomPropertyValue(e.CustomProperties,"HasChildNodes"):void 0,target:_,links:e.Nodes&&e.Nodes.length?i(e.Nodes,e,l):void 0,audiences:e.AudienceIds&&e.AudienceIds.length>0?e.AudienceIds:void 0,currentLCID:e.CurrentLCID,openInNewWindow:m?e.OpenInNewWindow:void 0}})};return i(e||[])},t.prototype._getCustomPropertyValue=function(e,t){for(var n=e.length-1;n>0;n--)if(e[n].Key===t)return e[n].Value;return""},t.prototype._getUrl=function(e,t,n,a){return e.SimpleUrl?e.SimpleUrl:(e.NodeType===l.e.FriendlyUrl&&e.FriendlyUrlSegment&&(i=(i=t?n+((a?"/".concat(a):"")+"/".concat(e.FriendlyUrlSegment)):n+e.FriendlyUrlSegment).replace("//","/")),i);var i},t.NAV_AUDIENCE_TARGET_FLAG=8388608,t}(c.e);function p(e){if(!e)return 0;for(var t=e.length,n=0,a=e;n<a.length;n++)t+=p(a[n].links);return t}function m(){return r.Killswitch.isActivated("759873da-625e-430b-a1f4-fb8f101c48db","10/11/2022","Utilize the getCurrentResourcesNav endpoint instead of the getHomeSiteNav endpoint")}t.default=f},ysJJ:function(e,t,n){"use strict";n.d(t,"e",function(){return l});var a,i=n("17wl"),r="MembershipsCache";function o(){if(!window||!window.localStorage)throw new Error("localStorage is not supported")}function s(e){return"".concat(r,"_").concat(e)}!function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure",e[e.ExpectedFailure=2]="ExpectedFailure"}(a||(a={}));var c=function(){function e(e,t){var n=this;this._log=function(e,t,a){n._logCacheQoS&&n._logCacheQoS("".concat(r,".").concat(e),t,a)},this._getData=e,this._logCacheQoS=t}return e.doesItemContainAudiences=function(e){var t;return((null===(t=null==e?void 0:e.audiences)||void 0===t?void 0:t.length)||0)>0},e.containsAudiences=function(t,n){if(!t)return!1;if(t.some(e.doesItemContainAudiences))return!0;if(n)for(var a=0,i=t;a<i.length;a++){var r=i[a];if(e.containsAudiences(r[n],n))return!0}return!1},e.getInstance=function(t,n){return e._instance||(e._instance=new e(t,n)),e._instance},e.prototype.filter=function(e,t,n,a,i,r,o){var s=this;return i?this.getCurrentUserMemberships(e,t,n,a,o).then(function(e){return s.filterWithMembership(e,i,r)}).catch(function(){return s.filterWithMembership([],i,r)}):Promise.resolve(void 0)},e.prototype.filterWithMembership=function(e,t,n){var a=this;if(!t)return t;var r=t.filter(function(t){return!function(e){return Boolean(e.audiences&&e.audiences.length>0&&"00000000-0000-0000-0000-000000000000"!==e.audiences[0])}(t)||function(e,t){var n=e.audiences;if(!n)return!1;for(var a=0;a<n.length;a++)if(-1!==t.indexOf(n[a]))return!0;return!1}(t,e)});return n&&(r=r.map(function(t){var r;return Object(i.__assign)(Object(i.__assign)({},t),((r={})[n]=a.filterWithMembership(e,t[n],n),r))})),r},e.prototype.getCurrentUserMemberships=function(e,t,n,i,r){var c,d=this,l=new URLSearchParams(window.location.search),u=!1;if("Preview"===l.get("env")&&l.has("audiences")){var f=l.get("audiences");c=f?f.split(","):[],u=!0}else try{c=function(e,t){o();var n=window.localStorage.getItem(s(e));if(n){var a=JSON.parse(n),i=Boolean(a&&a.lastModified&&Date.now()-a.lastModified<=72e5);if(t?navigator.onLine?i:Boolean(a):i)return a.data}}(t,r)}catch(e){this._log(i,a.Failure,{error:e.message||e,scenario:i})}if(c)return u||this._log(i,a.Success),Promise.resolve(c);if(!this._getMembershipsPromise){var p=n+"/_api/SP.Publishing.SitePageService.GetCurrentUserMemberships"+(i?"?scenario='".concat(i,"'"):"");this._getMembershipsPromise=this._getData(p,i).then(function(n){return d._getMembershipsPromise=void 0,n&&function(e,t,n){if(o(),n&&(e||n.length)){var a={data:n,lastModified:Date.now()};window.localStorage.setItem(s(t),JSON.stringify(a))}else window.localStorage.removeItem(s(t))}(e,t,n),d._log(i,a.ExpectedFailure),n})}return this._getMembershipsPromise},e}(),d=n("K9kD"),l=function(){function e(e){var t=this;this._getDataFromAPI=function(e,n){var a={url:e,qosName:n?"getUserMembershipsForAudienceTargeting.".concat(n):"getUserMembershipsForAudienceTargeting",cacheRequestKey:t._cacheRequestKey,parseResponse:function(e){return e&&JSON.parse(e).value||[]},method:"GET",additionalHeaders:{"ODATA-VERSION":"4.0",Accept:"*/*, application/json; odata.metadata=minimal"},contentType:"application/json; odata.metadata=minimal",maxRetries:1};return t._dataRequestor.getData(a)},this._logCacheQoS=function(e,t,n){return new d.Qos({name:e}).end({name:e,resultType:t,extraData:n})},this._pageContext=e,this._dataRequestor=new d.DataRequestor({qosName:"AudiencesDataSource"},{pageContext:e}),this._cacheRequestKey=e.aadUserId||e.userLoginName,this._audienceTargetComponent=c.getInstance(this._getDataFromAPI,this._logCacheQoS)}return e.getInstance=function(t){var n=t.aadUserId||t.userLoginName;return e._instances[n]||(e._instances[n]=new e(t)),e._instances[n]},e.prototype.containsAudiences=function(e,t){if(!e)return!1;if(e.filter(u).length>0)return!0;if(t)for(var n=0,a=e;n<a.length;n++){var i=a[n];if(this.containsAudiences(i[t],t))return!0}return!1},e.containsAudienceTargetedNode=function(e){var t=this;return!!e&&(e.filter(u).length>0||e.filter(function(e){return t.containsAudienceTargetedNode(e.links)}).length>0)},e.prototype.filter=function(e,t,n){var a=d.Killswitch.isActivated("845880ed-07f0-4103-bef6-d3d7779183b5");return d.Promise.resolve(this._audienceTargetComponent.filter(f(),this._cacheRequestKey,this._pageContext.webAbsoluteUrl,e,t,n,!a))},e.prototype.filterWithMembership=function(e,t,n){return this._audienceTargetComponent.filterWithMembership(e,t,n)},e.filterLinksWithMemberships=function(t,n){return e._filterRecursively(new Set(n),t,function(e){return e.links},function(e,t){return Object(i.__assign)(Object(i.__assign)({},e),{links:t})})},e.getGroupObjectId=function(e){return e.userId&&e.userId.length>=36?e.userId.substr(e.userId.length-36):void 0},e.prototype.getCurrentUserMemberships=function(e){var t=this._pageContext.webAbsoluteUrl;return window&&window.location&&window.location.origin&&-1===t.indexOf(window.location.origin)&&(t=window.location.origin),d.Promise.resolve(this._audienceTargetComponent.getCurrentUserMemberships(f(),this._cacheRequestKey,t,e))},e._filterRecursively=function(t,n,a,i){if(!n)return n;var r=n.filter(function(e){var n;return!u(e)||(null===(n=e.audiences)||void 0===n?void 0:n.some(function(e){return t.has(e)}))});return a&&i&&(r=r.map(function(n){var r=a(n),o=e._filterRecursively(t,r,a,i);return i(n,o)})),r},e._instances={},e}();function u(e){return!!(e.audiences&&e.audiences.length>0&&e.audiences[0]!==d.Guid.Empty)}function f(){return d.Killswitch.isActivated("c3d89da1-4105-4818-9cd3-f4a8b4ad9016")}}}]);