(window.msfast_searchux_sb_jsonp=window.msfast_searchux_sb_jsonp||[]).push([[6],{r5K3:function(t,e,n){"use strict";n.r(e);var i=n("+zb2"),o=n("lZuS"),r=(new Date).valueOf(),a="object"==typeof window&&window.performance&&performance.now?performance.now.bind(performance):function(){return(new Date).valueOf()-r},s=function(t){return t};var u=function(t,e){return Object.keys(t).reduce((function(n,i){return n[i]=e(t[i]),n}),{})};function d(t){return Object.keys(t).reduce((function(e,n){return e.push(t[n]),e}),[])}var h=function(){function t(t){this._durationCalculated=!0,this._duration=0,this._now=0,this.components=[],this._speed=1,this.canvas=t}return t.prototype.addComponent=function(t){this._durationCalculated=!1,t.transitions=u(t.transitions||{},(function(t){return Object(i.__assign)({from:0,to:0,duration:0,delay:0,timing:s},t)})),this.components.push(t)},t.prototype.to=function(t){var e=this,n=Math.min(Math.max(t,0),this.duration());return this._now=n,this.components.forEach((function(t){return t.render(e.canvas,function(t,e){return u(t,(function(t){if(void 0!==t.delay&&e<=t.delay)return t.from;if(void 0!==t.delay&&void 0!==t.duration){if(e>=t.delay+t.duration)return t.to;if(void 0!==t.from&&void 0!==t.to&&void 0!==t.timing)return t.from+(t.to-t.from)*t.timing((e-t.delay)/t.duration)}}))}(t.transitions||{},n),n)})),n},t.prototype.duration=function(){return this._durationCalculated?this._duration:(this._durationCalculated=!0,this._duration=(t=(e=this.components.map((function(t){return t.transitions||{}})).map(d),e.reduce((function(t,e){return t.concat(e)}),[])).map((function(t){return void 0!==t.duration&&void 0!==t.delay?t.duration+t.delay:0})),Math.max.apply(null,t)));var t,e},t.prototype.prevFrame=function(){this.to(this._now-1e3/60)},t.prototype.nextFrame=function(){this.to(this._now+1e3/60)},t.prototype.play=function(t){this.pause();var e=this._now,n=a(),i=0,o=this;function r(s){i++;var u=e+(s-n)*o._speed;e=o.to(u),n=s,(o._speed>0?o._now>=o.duration():o._now<=0)?t&&t({frames:i,duration:a()-n}):o._cancelToken=requestAnimationFrame(r)}return this._cancelToken=requestAnimationFrame((function(t){t<=n?o._cancelToken=requestAnimationFrame(r):r(t)})),this.pause.bind(this)},t.prototype.pause=function(){void 0!==this._cancelToken&&cancelAnimationFrame(this._cancelToken)},t.prototype.speed=function(t){this._speed=t},t.prototype.dump=function(t,e,n,i){void 0===n&&(n=16),void 0===i&&(i=-1);var o=Math.floor(this.duration()/n);o*n<this.duration()&&o++,o++,i<1&&(i=Math.floor(Math.sqrt(o)));var r=Math.ceil(o/i);console.log(o,i,r);var a=document.createElement("canvas");a.width=t*i+i+1,a.height=e*r+r+1;var s=a.getContext("2d");if(s){s.fillStyle="#666",s.fillRect(0,0,a.width,1),s.fillRect(0,0,1,a.height);for(var u=1;u<=i;u++)s.fillRect(t*u+1*u,0,1,a.height);for(u=1;u<=r;u++)s.fillRect(0,e*u+1*u,a.width,1);for(u=0;u<o;u++)this.to(n*u),s.drawImage(this.canvas,u%i*t+u%i+1,Math.floor(u/i)*e+Math.floor(u/i)+1)}return a},t}();var c=function(){function t(){}return t.prototype.render=function(t){var e=t.getContext("2d");e&&(e.beginPath(),e.clearRect(0,0,t.width,t.height),e.closePath())},t}();function p(t,e,n){var i=function(t,e,n,i){var o=t/e;i||(i=n/o);var r=n/i,a=t,s=e;return o>r?a=Math.round(e*r):s=Math.round(t/r),{x:(t-a)/2,y:(e-s)/2,sWidth:a,sHeight:s,dWidth:n,dHeight:i}}(t.naturalWidth,t.naturalHeight,e,n),o=document.createElement("canvas"),r=o.getContext("2d");return o.width=i.dWidth,o.height=i.dHeight,r&&r.drawImage(t,i.x,i.y,i.sWidth,i.sHeight,0,0,i.dWidth,i.dHeight),o}var l,f=n("cDcd");!function(t){t[t.Pending=0]="Pending",t[t.Active=1]="Active",t[t.Aborted=2]="Aborted",t[t.Done=3]="Done"}(l||(l={}));var m,g,v=function(){function t(t,e,n,i){this.id=t,this.priority=e,this.start=n,this.state=i}return t.prototype.getPriority=function(){return this.priority?this.priority():0},t}(),y=function(){function t(t,e){this.pending=[],this.started=[],this.nextTaskId=1,this.maxConcurrentTasks=t,this.name=e||"TaskQueue"}return t.prototype.addTask=function(t,e){var n=this,i=new v(this.nextTaskId++,e,t,l.Pending);return this.pending.push(i),setTimeout((function(){return n.schedule()}),0),function(){return n.abortTask(i)}},t.prototype.pendingCount=function(){return this.pending.length},t.prototype.activeCount=function(){return this.started.length},t.prototype.schedule=function(){for(var t=this,e=function(){for(var e=0,o=0;++o<n.pending.length;)n.pending[o].getPriority()>n.pending[e].getPriority()&&(e=o);var r=Object(i.__read)(n.pending.splice(e,1),1)[0];r.state=l.Active,n.started.push(r),r.start((function(){return t.taskDone(r)}))},n=this;this.pending.length>0&&this.started.length<this.maxConcurrentTasks;)e()},t.removeFrom=function(t,e){for(var n=0;n<e.length;n++)if(e[n].id===t.id){e.splice(n,1);break}},t.prototype.taskDone=function(e){var n=this;e.state===l.Active&&(t.removeFrom(e,this.started),e.state=l.Done,setTimeout((function(){return n.schedule()}),0))},t.prototype.abortTask=function(e){var n=this;e.state===l.Pending&&(t.removeFrom(e,this.pending),e.state=l.Aborted,setTimeout((function(){return n.schedule()}),0))},t}();!function(t){t[t.High=0]="High",t[t.Medium=1]="Medium",t[t.Low=2]="Low"}(m||(m={})),function(t){t[t.Queued=0]="Queued",t[t.Loading=1]="Loading",t[t.Loaded=2]="Loaded",t[t.Failed=3]="Failed"}(g||(g={}));var w=function(){function t(t,e,n,i){this.source=t,this.priority=e,this.state=n,this.crossOrigin=i,this.listeners=[],this.abort=null,this.loader=null}return t.prototype.addListener=function(t){this.listeners.push(t)},t.prototype.removeListener=function(t){this.listeners=this.listeners.filter((function(e){return e!==t}))},t.prototype.getPriority=function(){var t=0;switch(this.listeners.forEach((function(e){var n=e.getTargetElement();n&&(!function(t){var e=t.getBoundingClientRect();return t&&e&&e.bottom>=0&&e.right>=0&&e.top<Math.min(window.innerHeight,document.body.clientHeight)&&e.left<Math.min(window.innerWidth,document.body.clientWidth)}(n)?t+=1:t+=5)})),this.priority){case m.High:return 3*t;case m.Medium:return 2*t;default:return t}},t}(),b=new(function(){function t(){this.tasks=new y(6,"ImageLoadManager"),this.images={}}return t.prototype.register=function(t,e,n,i){if(t){t.match(/^data:/i)&&n.imageFinishedLoading(t,!1,void 0);var o=this.images[t];if(o)switch(o.addListener(n),o.state){case g.Loading:n.imageStartedLoading(t);break;case g.Loaded:n.imageFinishedLoading(t,!1,o.loader||void 0);break;case g.Failed:n.imageFinishedLoading(t,!0,o.loader||void 0);break;case g.Queued:break;default:throw new Error("Bad image state: "+o.state)}else(o=new w(t,e,g.Queued,i)).addListener(n),this.images[t]=o,this.addImageTask(o);return o.state}},t.prototype.addImageTask=function(t){var e=this;t.abort&&t.abort(),t.abort=this.tasks.addTask((function(n){return e.startLoadingImage(t,n)}),(function(){return t.getPriority()}))},t.prototype.startLoadingImage=function(t,e){var n=this;t.state=g.Loading;var i=new Image;t.loader=i,t.crossOrigin&&i.setAttribute("crossOrigin",t.crossOrigin),i.onload=function(){return n.finishedLoadingImage(t,!1,e)},i.onerror=function(){return n.finishedLoadingImage(t,!0,e)},i.src=t.source,t.listeners.forEach((function(e){return e.imageStartedLoading(t.source)}))},t.prototype.finishedLoadingImage=function(t,e,n){t.state===g.Loading&&(t.state=e?g.Failed:g.Loaded,e&&(t.loader=null),t.listeners.forEach((function(n){return n.imageFinishedLoading(t.source,e,t.loader||void 0)}))),n()},t.prototype.unregister=function(t,e){var n=this.images[t];n&&(n.removeListener(e),n.state===g.Queued&&0===n.listeners.length&&(n.abort&&(n.abort(),n.abort=null),delete this.images[t]))},t}());function _(t,e){return parseInt((t||"").replace("px",""),0)||e}var L=function(t){function e(e){var n=t.call(this,e)||this;return n.shouldUpdateImage=!1,n.hasUnmounted=!1,n.canvasElement=null,n.state={imageState:"queued",fingerprint:"",outcome:"none"},n}return Object(i.__extends)(e,t),e.prototype.render=function(){var t=this,e=f.Children.toArray(this.props.children)[0].props,n=e.src,o=e.alt,r=(e.crossOrigin,Object(i.__rest)(e,["src","alt","crossOrigin"])),a=Object(i.__assign)(Object(i.__assign)({},r),{"data-src":n||"","data-status":this.getImageStatus(),"data-fingerprint":this.state.fingerprint});return f.createElement("canvas",Object(i.__assign)({ref:function(e){return t.canvasElement=e}},a),o||null)},e.prototype.componentDidMount=function(){var t=this.getCanvasDimensions(),e=t.width,n=t.height;this.canvasElement&&(this.canvasElement.width=e,this.canvasElement.height=n),this.fetchImage()},e.prototype.fetchImage=function(){var t,e=I(this.props),n=e.props.src;if(n){var i=this.props.priority;t=b.register(n,void 0===i?m.Medium:i,this,e.props.crossOrigin)}t!==g.Loaded&&this.canvasElement&&this.renderFallback(this.canvasElement)},e.prototype.UNSAFE_componentWillReceiveProps=function(t){this.shouldUpdateImage=this.shouldUpdateImage||I(this.props)!==I(t)||!this.propsAreEqual(t)},e.prototype.componentDidUpdate=function(t){this.shouldUpdateImage&&(this.shouldUpdateImage=!1,b.unregister(I(t).props.src||"",this),this.fetchImage())},e.prototype.componentWillUnmount=function(){this.hasUnmounted=!0,b.unregister(I(this.props).props.src||"",this),this.dispose()},e.prototype.getImageStatus=function(){return"finished"===this.state.imageState?this.state.outcome:this.state.imageState},e.prototype.imageStartedLoading=function(t){this.hasUnmounted||this.setState({imageState:"loading"})},e.prototype.imageFinishedLoading=function(t,e,n){this.hasUnmounted||(this.setState({imageState:"finished",fingerprint:(null==n?void 0:n.getAttribute("data-fingerprint"))||void 0,outcome:e?"load-error":"success"}),!e&&n&&this.canvasElement?this.renderImage(this.canvasElement,n):e&&this.canvasElement&&this.renderFailed(this.canvasElement))},e.prototype.getTargetElement=function(){return this.canvasElement},e.prototype.getCanvasDimensions=function(){var t=this.props.dimensions;if(t)return t;if(!this.canvasElement)return{width:100,height:100};var e=getComputedStyle(this.canvasElement),n=e.width,i=e.height;return{width:_(n,100),height:_(i,100)}},e}(f.Component);function I(t){var e=f.Children.toArray(t.children)[0];if(!f.isValidElement(e))throw new Error("ImageLoader: Child must be a valid React element.");if("img"!==e.type)throw new Error("ImageLoader: Child must be an image element.");return e}var k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.__extends)(e,t),e.prototype.propsAreEqual=function(t){return this.props.acronym===t.acronym&&this.props.color===t.color},e.prototype.renderFallback=function(t){this.animation&&this.animation.pause();var e=this.animation=new h(t);e.addComponent(new c),e.addComponent(new E(this.props.acronym,this.props.color)),e.to(0)},e.prototype.renderImage=function(t,e){var n;if(Object(o.a)(e))this.renderFallback(t);else{var i=this.dimensions=this.getCanvasDimensions(),r=i.width,a=i.height;this.animation?(this.animation.addComponent(new C(r,a,e)),this.animation.play()):null===(n=t.getContext("2d"))||void 0===n||n.drawImage(p(e,r,a),0,0)}},e.prototype.renderFailed=function(t){},e.prototype.dispose=function(){this.animation&&this.animation.pause(),delete this.animation},e}(L),E=(e.default=k,function(){function t(t,e){this.acronym=t,this.color=e,this.transitions={opacity:{from:1,to:0,duration:250}}}return t.prototype.render=function(t,e,n){n<500&&function(t,e,n,i){void 0===i&&(i=1);var o=t.getContext("2d"),r=t.width,a=t.height;o&&(o.fillStyle="rgb(".concat(n,")"),o.fillRect(0,0,r,a),o.font=a*(21/55)+"px Segoe UI",o.textAlign="center",o.fillStyle="rgba(255, 255, 255, ".concat(i,")"),o.textBaseline="middle",o.fillText(e,r/2,a/2))}(t,this.acronym,this.color,e.opacity)},t}()),C=function(){function t(t,e,n){this.width=t,this.height=e,this.transitions={opacity:{from:0,to:1,duration:500,timing:function(t){return.3*t+.7*Math.pow(t,5)}}},this.image=p(n,t,e)}return t.prototype.render=function(t,e){var n=t.getContext("2d");n&&(n.save(),void 0!==e.opacity&&(n.globalAlpha=e.opacity),n.drawImage(this.image,0,0),n.restore())},t}()}}]);